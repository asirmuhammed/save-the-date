!(function () {
  "use strict";
  $(window).on("load", function () {
    $(".loader").delay(600).fadeOut("slow"),
      setTimeout(function () {
        $(".cover .display-tc").addClass("fade-in-up");
      }, 800);
  }),
    document.addEventListener("DOMContentLoaded", function () {
      const e = document.getElementById("navbar"),
        t = new bootstrap.Offcanvas("#offcanvasNavbar");
      window.addEventListener("scroll", function () {
        window.scrollY > 100
          ? document.getElementById("navbar").classList.add("fixed-top")
          : document.getElementById("navbar").classList.remove("fixed-top");
      }),
        e.addEventListener("click", function (e) {
          e.target.classList.contains("nav-link") &&
            (console.log(e.target), t.hide());
        });
    });
  var e = function () {
      $(".js-counter").countTo({
        formatter: function (e, t) {
          return e.toFixed(t.decimals);
        },
      });
    },
    t = function () {
      document.querySelector(".countdown") &&
        (function (e, t) {
          var n,
            a = document.getElementById(e),
            o = a.querySelector(".days"),
            i = a.querySelector(".hours"),
            s = a.querySelector(".minutes"),
            r = a.querySelector(".seconds");
          function l() {
            var e = (function (e) {
                var t = Date.parse(e) - Date.parse(new Date()),
                  n = Math.floor((t / 1e3) % 60),
                  a = Math.floor((t / 1e3 / 60) % 60),
                  o = Math.floor((t / 36e5) % 24);
                return {
                  total: t,
                  days: Math.floor(t / 864e5),
                  hours: o,
                  minutes: a,
                  seconds: n,
                };
              })(t),
              a = String(e.days).split("");
            o.innerHTML = "";
            for (var l = 0; l < a.length; l++)
              ((n = document.createElement("span")).innerHTML = a[l]),
                o.appendChild(n);
            var c = String(("0" + e.hours).slice(-2)).split("");
            for (i.innerHTML = "", l = 0; l < c.length; l++)
              ((n = document.createElement("span")).innerHTML = c[l]),
                i.appendChild(n);
            var u = String(("0" + e.minutes).slice(-2)).split("");
            for (s.innerHTML = "", l = 0; l < u.length; l++)
              ((n = document.createElement("span")).innerHTML = u[l]),
                s.appendChild(n);
            var f = String(("0" + e.seconds).slice(-2)).split("");
            for (r.innerHTML = "", l = 0; l < f.length; l++)
              ((n = document.createElement("span")).innerHTML = f[l]),
                r.appendChild(n);
            e.total <= 0 && clearInterval(d);
          }
          l();
          var d = setInterval(l, 1e3);
        })("timer", "November 28 2023 17:30:00 GMT+0300");
    };
  $(function () {
    var n, a, o, i;
    $(".animate-box").waypoint(
      function (e) {
        "down" !== e ||
          $(this.element).hasClass("animated-fast") ||
          ($(this.element).addClass("item-animate"),
          setTimeout(function () {
            $("body .animate-box.item-animate").each(function (e) {
              var t = $(this);
              setTimeout(
                function () {
                  var e = t.data("animate-effect");
                  "fade-in" === e
                    ? t.addClass("fade-in animated-fast")
                    : "fade-in-left" === e
                    ? t.addClass("fade-in-left animated-fast")
                    : "fade-in-right" === e
                    ? t.addClass("fade-in-right animated-fast")
                    : t.addClass("fade-in-up animated-fast"),
                    t.removeClass("item-animate");
                },
                200 * e,
                "easeInOutExpo"
              );
            });
          }, 100));
      },
      { offset: "85%" }
    ),
      $(".owl-carousel-fullwidth").owlCarousel({
        items: 1,
        loop: !0,
        margin: 0,
        responsiveClass: !0,
        nav: !1,
        dots: !0,
        smartSpeed: 800,
        autoHeight: !0,
      }),
      e(),
      $("#counter").length > 0 &&
        $("#counter").waypoint(
          function (t) {
            "down" !== t ||
              $(this.element).hasClass("animated") ||
              (setTimeout(e, 400), $(this.element).addClass("animated"));
          },
          { offset: "90%" }
        ),
      t(),
      (n = $(".add-button")),
      (a = $("#form-guest-name")),
      (o = $(".guest-list")),
      n.on("click", function () {
        event.preventDefault();
        var e = a.val(),
          t =
            '<div><input class="form-control" type="text" value="' +
            e +
            '"/><a href="#" class="remove_field"><i class="fa fa-trash"></i></a></div>';
        "" == e ? a.focus() : (o.append(t), a.val(""));
      }),
      $(".guest-list").on("click", ".remove_field", function (e) {
        e.preventDefault(), $(this).parent("div").remove();
      }),
      (function () {
        var e = $(".grid");
        e.imagesLoaded(function () {
          e.isotope({
            itemSelector: ".grid-item",
            percentPosition: !0,
            masonry: { columnWidth: ".grid-sizer" },
            getSortData: {
              moments: ".moments",
              category: "[data-category]",
              weight: function (e) {
                var t = $(e).find(".weight").text();
                return parseFloat(t.replace(/[\(\)]/g, ""));
              },
            },
          });
        });
        var t = {
          numberGreaterThan50: function () {
            var e = $(this).find(".number").text();
            return parseInt(e, 10) > 50;
          },
          ium: function () {
            return $(this).find(".name").text().match(/ium$/);
          },
        };
        $(".filters-button-group").on("click", "button", function () {
          var n = $(this).attr("data-filter");
          (n = t[n] || n), e.isotope({ filter: n });
        }),
          $(".button-group").each(function (e, t) {
            var n = $(t);
            n.on("click", "button", function () {
              n.find(".is-checked").removeClass("is-checked"),
                $(this).addClass("is-checked");
            });
          });
      })(),
      (i = $("#contact-form")),
      $(".form-control").on("focus blur", (e) => {
        "" === $(e.target).val() &&
          ("focus" === e.type
            ? $(e.target).next(".control-label").addClass("filled")
            : "blur" === e.type &&
              $(e.target).next(".control-label").removeClass("filled"));
      }),
      i.submit(function (e) {
        $(".form-group").removeClass("has-error"), $(".help-block").remove();
        var t = [];
        $(".guest-list input").each(function () {
          t.push(this.value);
        });
        var n = {
          name: $('input[name="form-name"]').val(),
          email: $('input[name="form-email"]').val(),
          attending: $('.switch-field input[type="radio"]:checked').attr("id"),
          guest: t.join(", "),
        };
        $.ajax({
          type: "POST",
          url: "form.php",
          data: n,
          dataType: "json",
          encode: !0,
        })
          .done(function (e) {
            e.success
              ? i.html('<div class="message-success">' + e.message + "</div>")
              : (e.errors.name &&
                  ($("#name-field").addClass("has-error"),
                  $("#name-field")
                    .find(".col-sm-6")
                    .append(
                      '<span class="help-block">' + e.errors.name + "</span>"
                    )),
                e.errors.email &&
                  ($("#email-field").addClass("has-error"),
                  $("#email-field")
                    .find(".col-sm-6")
                    .append(
                      '<span class="help-block">' + e.errors.email + "</span>"
                    )));
          })
          .fail(function (e) {}),
          e.preventDefault();
      });
  });
})();
